<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layout :: layout(~{::title}, ~{::main})}">

<head>
    <title>Manage Teachers</title>
     <style>
        /* Style for delete button form */
        .delete-form { display: inline; }
        /* Style for icon links/buttons (copied for consistency) */
        .action-icon {
            display: inline-flex; align-items: center; padding: 0.3rem 0.5rem;
            border-radius: 0.25rem; transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
            text-decoration: none; border: none; background-color: transparent; cursor: pointer;
        }
        .action-icon:hover { background-color: #f3f4f6; text-decoration: none; }
        .action-icon i { width: 1rem; height: 1rem; margin-right: 0.25rem; flex-shrink: 0; }
     </style>
</head>

<body>

    <main th:fragment="main">
        <div class="flex flex-col sm:flex-row justify-between items-center mb-6">
            <h2 class="text-2xl font-semibold text-gray-700 mb-2 sm:mb-0">Manage Teachers</h2>
            <a th:href="@{/admin/teachers/new}" class="btn btn-success btn-sm"> <i class="fas fa-user-plus mr-1"></i> Add New Teacher
            </a>
        </div>

        <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

        <div class="table-container bg-white">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Username (Email)</th>
                        <th>Enabled</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody class="text-gray-700">
                    <tr th:each="teacher : ${teachers}" th:if="${!teachers.isEmpty()}" class="hover:bg-gray-50">
                        <td class="text-sm" th:text="${teacher.id}">1</td>
                        <td class="text-sm" th:text="${teacher.firstName}">John</td>
                        <td class="text-sm" th:text="${teacher.lastName}">Doe</td>
                        <td class="text-sm" th:text="${teacher.username}">john.doe@example.com</td>
                        <td class="text-sm">
                            <span th:if="${teacher.enabled}" class="badge badge-green">Yes</span>
                            <span th:unless="${teacher.enabled}" class="badge badge-red">No</span>
                        </td>
                        <td class="text-sm whitespace-nowrap">
                            <div class="flex items-center space-x-2">
                                <a th:href="@{/admin/teachers/edit/{id}(id=${teacher.id})}"
                                   class="action-icon text-yellow-600 hover:text-yellow-800"
                                   title="Edit Teacher" aria-label="Edit Teacher">
                                    <i class="fas fa-edit"></i>
                                    <span class="text-xs font-medium">Edit</span>
                                </a>
                                <form th:action="@{/admin/teachers/delete/{id}(id=${teacher.id})}"
                                      method="post"
                                      class="delete-form m-0 p-0 inline"
                                      onsubmit="return confirm('Are you sure you want to delete this teacher? This might also delete their classes!');">
                                    <button type="submit"
                                            class="action-icon text-red-500 hover:text-red-700"
                                            title="Delete Teacher" aria-label="Delete Teacher">
                                        <i class="fas fa-trash-alt"></i>
                                        <span class="text-xs font-medium">Delete</span>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    <tr th:if="${teachers.isEmpty()}">
                        <td colspan="6" class="px-4 py-4 text-center text-gray-500 italic">
                            No teachers found. Use the "Add New Teacher" button to create one.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="mt-8 text-center">
             <a th:href="@{/dashboard}" class="text-sm text-purple-600 hover:underline">&larr; Back to Dashboard</a>
        </div>
    </main>

</body>
</html>
